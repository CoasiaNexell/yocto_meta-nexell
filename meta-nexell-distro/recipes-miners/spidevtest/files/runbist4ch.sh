#!/bin/sh

#AUTO_ADDRESS
echo ""
echo ""
echo "AUTO_ADDRESS"
echo ""
spidevtest -OH -D /dev/spidev0.0 -v -p "\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"

#READ_ID
#spidevtest -OH -D /dev/spidev0.0 -v -p "\x00\x01\x00\x00\x00\x00\x00\x00"

#RESET
#spidevtest -OH -D /dev/spidev0.0 -v -p "\x04\x00\x00\x00"

#WRITE_PARM
echo ""
echo ""
echo "WRITE_PARM"
echo ""
spidevtest -OH -D /dev/spidev0.0 -v -p "\x07\x00\xa2\x60\x4d\x5f\x07\xc4\x85\x53\x0c\x4e\xa8\xc2\xc4\x69\x91\x25\x4b\xa5\xa4\x10\x08\x17\xf7\x93\xec\xdf\xab\xf1\xd2\x81\x8b\x6e\x17\x37\x6f\x56\x5b\x30\x70\x7e\xf4\x2a\x1d\x6e\x00\x00"

#READ_PARM
#spidevtest -OH -D /dev/spidev0.0 -v -p "\x08\x01\xa2\x60\x4d\x5f\x07\xc4\x85\x53\x0c\x4e\xa8\xc2\xc4\x69\x91\x25\x4b\xa5\xa4\x10\x08\x17\xf7\x93\xec\xdf\xab\xf1\xd2\x81\x8b\x6e\x17\x37\x6f\x56\x5b\x30\x70\x7e\xf4\x2a\x1d\x6e\x00\x00"

#WRITE_TARGET
echo ""
echo ""
echo "WRITE_TARGET"
echo ""
spidevtest -OH -D /dev/spidev0.0 -v -p "\x09\x00\x1f\xff\xff\xff\x06\x30\x00\x00"

#READ_TARGET
#spidevtest -OH -D /dev/spidev0.0 -v -p "\x0A\x01\xEA\x5C\xF8\x90\x00\x00"

#WRITE_NONCE
echo ""
echo ""
echo "WRITE_NONCE"
echo ""
spidevtest -OH -D /dev/spidev0.0 -v -p "\x16\x01\x66\xcb\x34\x26\x66\xcb\x34\x26\x00\x00"
echo ""
spidevtest -OH -D /dev/spidev0.0 -v -p "\x16\x02\x66\xcb\x34\x26\x66\xcb\x34\x26\x00\x00"
echo ""
spidevtest -OH -D /dev/spidev0.0 -v -p "\x16\x03\x66\xcb\x34\x26\x66\xcb\x34\x26\x00\x00"
echo ""
spidevtest -OH -D /dev/spidev0.0 -v -p "\x16\x04\x66\xcb\x34\x26\x66\xcb\x34\x26\x00\x00"

#SET_DISABLE
echo ""
echo ""
echo "SET_DISABLE"
echo ""
spidevtest -OH -D /dev/spidev0.0 -v -p "\x10\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"

#RUN_BIST
echo ""
echo ""
echo "RUN_BIST"
echo ""
spidevtest -OH -D /dev/spidev0.0 -v -p "\x02\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x22\x09\x3d\xd4\x38\xed\x47\xfa\x28\xe7\x18\x58\xb8\x22\x0d\x53\xe5\xcd\x83\xb8\xd0\xd4\x42\x00\x00"
echo ""

sleep 1

#READ_BIST
echo ""
echo ""
echo "READ_BIST"
echo ""
echo "spidevtest -OH -D /dev/spidev0.0 -v -p \"\x03\x01\x00\x00\""
echo ""
spidevtest -OH -D /dev/spidev0.0 -v -p "\x03\x01\x00\x00"
echo ""
echo "spidevtest -OH -D /dev/spidev0.0 -v -p \"\x03\x02\x00\x00\""
echo ""
spidevtest -OH -D /dev/spidev0.0 -v -p "\x03\x02\x00\x00"
echo ""
echo "spidevtest -OH -D /dev/spidev0.0 -v -p \"\x03\x03\x00\x00\""
echo ""
spidevtest -OH -D /dev/spidev0.0 -v -p "\x03\x03\x00\x00"
echo ""
echo "spidevtest -OH -D /dev/spidev0.0 -v -p \"\x03\x04\x00\x00\""
echo ""
spidevtest -OH -D /dev/spidev0.0 -v -p "\x03\x04\x00\x00"

#READ_DISABLE
echo ""
echo ""
echo "READ_DISABLE"
echo ""
echo "spidevtest -OH -D /dev/spidev0.0 -v -p \"\x11\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\""
echo ""
spidevtest -OH -D /dev/spidev0.0 -v -p "\x11\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
echo ""
echo "spidevtest -OH -D /dev/spidev0.0 -v -p \"\x11\x02\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\""
echo ""
spidevtest -OH -D /dev/spidev0.0 -v -p "\x11\x02\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
echo ""
echo "spidevtest -OH -D /dev/spidev0.0 -v -p \"\x11\x03\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\""
echo ""
spidevtest -OH -D /dev/spidev0.0 -v -p "\x11\x03\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
echo ""
echo "spidevtest -OH -D /dev/spidev0.0 -v -p \"\x11\x04\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\""
echo ""
spidevtest -OH -D /dev/spidev0.0 -v -p "\x11\x04\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"

